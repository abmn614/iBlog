<extend name="./Public/Admin/base.html" />

<block name="page_tool">
</block>

<block name="content">
    <div class="panel panel-primary">
        <div class="panel-body">
            <form action="{ :U('Post/postAddDo', '', '') }" method="post" class="form-horizontal">
                <div class="form-group">
                    <label class="col-md-1 col-xs-12 control-label">标题</label>
                    <div class="col-md-4 col-xs-12 input-group">   
                        <input type="text" name="title" placeholder="请输入文章标题" class="form-control" onkeyup="count(this.value)">
                        <span class="input-group-addon" id="title_count">0.0</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-1 col-xs-12 control-label">分类</label>
                    <div class="col-md-3 col-xs-12">
                        <select name="cate_id" class="form-control">
                            <option value="0">请选择目录</option>
                            <volist name="cates" id="cate">
                                <option value="{ $cate.id }">
                                    <if condition="$cate['level'] neq 1">
                                        &nbsp;&nbsp;|
                                    </if>{ $cate.sign }{ $cate.name }
                                </option>
                            </volist>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-1 col-xs-12 control-label">作者</label>
                    <div class="col-md-3 col-xs-12">
                        <input type="text" name="username" value="{ $username }" placeholder="请输入作者" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-1 col-xs-12 control-label">内容</label>
                    <div class="col-md-11 col-xs-12">   
                        <!-- 加载编辑器的容器 -->
                        <script id="container" name="content" type="text/plain">在这里输入内容...</script>
                        <!-- 配置文件 -->
                        <script type="text/javascript" src="{ $Think.config.UEDITOR }ueditor.config.js"></script>
                        <!-- 编辑器源码文件 -->
                        <script type="text/javascript" src="{ $Think.config.UEDITOR }ueditor.all.min.js"></script>
                        <!-- 实例化编辑器 -->
                        <script type="text/javascript">
                            var ue = UE.getEditor('container', {
                                initialFrameWidth: '100%',
                                zIndex : 0,
                            });
                        </script>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-1 col-xs-12 control-label">标签</label>
                    <div class="col-md-6 col-md-12">
                        <input type="text" name="tag" class="tagsinput form-control" value="">
                    </div>
                </div> 
                <div class="form-group">
                    <label class="col-md-1 col-xs-12 control-label"></label>
                    <div class="col-md-3 col-xs-12">
                        <input type="hidden" name="user_id" value="{ $userid }">
                        <input type="submit" value="发布文章" class="btn btn-primary">
                    </div>
                </div>
                <br>
            </form>
        </div>
    </div>
</block>

<block name="page_plugins">
    <script type="text/javascript" src="{ $Think.config.Public }js/plugins/tagsinput/jquery.tagsinput.min.js"></script>
</block>

<block name="js">
<script>
    function count(v){
        // 中文：cn，英文：v.length-cn
        var cn=v.match(/[\u4E00-\uFA29]/g);
        if(cn)cn=cn.join('').length;
        else cn=0;
        document.getElementById('title_count').innerHTML= cn + (v.length - cn) * 0.5;
    }
</script>
</block>
